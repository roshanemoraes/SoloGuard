import { create } from "zustand";

type Lang = "en" | "si";

const translations: Record<Lang, Record<string, string>> = {
  en: {
    whereTo: "Where to?",
    subtitle: "Places to go, things to do, hotels...",
    pickOnMap: "Pick on Google Maps",
    searchPlaceholder: "Places to go, things to do, hotels...",
    safetyTips: "Safety tips",
    needHelp: "Need help?",
    deleteTitle: "Delete destination",
    deleteMessage: `Are you sure you want to delete "{{name}}"?`,
    cancel: "Cancel",
    delete: "Delete",
    clear: "Clear",
    noDestinations: "No Destinations",
    noDestinationsDesc: "Search above to add destinations to your trip.",
    yourTripDestinations: "Your trip destinations ({{count}})",
    pickOnMapModalTitle: "Select on Google Maps",
    mapTapHint: "Tap on the map to drop a pin, then name it.",
    addDestination: "Add destination",
    status: "Status",
    location: "Location",
    battery: "Battery",
    emergencyContacts: "Emergency Contacts",
    active: "Active",
    noLocation: "No Location",
    monitoringActive: "MONITORING ACTIVE",
    monitoringInactive: "MONITORING INACTIVE",
    emergencyMode: "EMERGENCY MODE",
    sos: "SOS",
    emergencyAlert: "Emergency Alert",
    quickActions: "Quick Actions",
    setup: "Setup",
    tripPlan: "Trip Plan",
    pause: "Pause",
    start: "Start",
    currentLocation: "Current Location",
    lastUpdated: "Last updated",
    settings: "Settings",
    inactivityThreshold: "Inactivity Threshold",
    batteryAlert: "Battery Alert",
    updateInterval: "Update Interval",
    autoSOS: "Auto SOS",
    preferMMS: "Prefer MMS",
    enabled: "Enabled",
    disabled: "Disabled",
    yes: "Yes",
    no: "No",
    unknown: "Unknown",
    charging: "Charging",
    full: "Full",
    lowPower: "Low Power",
    sosSent: "SOS Sent",
    sosIssue: "SOS Issue",
    sosSentMessage: "SOS sent to your contacts.",
    sosFailedMessage: "Failed to send SOS. Check settings.",
    sosMissingContact: "Add an active emergency contact before sending SOS.",
    sosMissingLocation: "No location available. Please enable location and try again.",
    sosRetry: "Failed to send SOS. Please retry.",
    sendSOSQuestion: "Send SOS?",
    sosModalBody:
      "We will send an SOS to your emergency contacts with your latest location and profile details.",
    sosTip: "Tip: Add an active contact and ensure location is available before sending.",
    sendSOS: "Send SOS",
    sending: "Sending...",
    activityLogs: "Activity Logs",
    rows: "{{count}} rows",
    filters: "Filters",
    tools: "Tools",
    exportAll: "Export All",
    exportShown: "Export Shown",
    clearAll: "Clear All",
    clearShown: "Clear Shown",
    filterByDateTime: "Filter by Date & Time",
    from: "From",
    to: "To",
    anyDate: "Any date",
    anyTime: "Any time",
    reset: "Reset",
    nothingToExport: "Nothing to export",
    noLogsMatch: "No logs match the filters.",
    noLogsYet: "No Logs Yet",
    logsHint: "Monitoring logs will appear here once you start using SafeGuard",
    clearAllTitle: "Clear All Logs",
    clearAllMessage: "This will remove all logs. Continue?",
    clearShownTitle: "Clear Shown Logs",
    clearShownMessage: "Remove {{count}} filtered logs?",
    nothingToClear: "Nothing to clear",
    featureNotAvailable: "Feature not available",
    addClearLogsByIds:
      "Add clearLogsByIds(ids: string[]) to the store to enable clearing only filtered logs.",
    savedToPath: "Saved to: {{path}}",
    searchCountryCode: "Search country or code",
    selectCountryCode: "Select Country Code",
    yourProfile: "Your Profile",
    save: "Save",
    fullName: "Full Name",
    username: "Username",
    phoneNumber: "Phone Number",
    emailOptional: "Email (optional)",
    medicalNotes: "Medical / Other Notes",
    medicalHelper: "These details are included in SOS messages for responders.",
    storedAs: "Stored as:",
    enterFullName: "Enter your full name",
    handlePlaceholder: "@handle",
    yourPhone: "Your phone",
    emailPlaceholder: "you@example.com",
    medicalPlaceholder: "Allergies, medications, other critical info",
    profileSaved: "Profile saved and used in SOS messages.",
    fixFields: "Please fix the highlighted fields.",
  },
  si: {
    whereTo: "කොහෙද යන්න?",
    subtitle: "යන්න තැන්, කිරීමට දේ, හෝටල්...",
    pickOnMap: "Google Maps මත තෝරන්න",
    searchPlaceholder: "යන්න තැන්, කිරීමට දේ, හෝටල්...",
    safetyTips: "ආරක්ෂක උපදෙස්",
    needHelp: "උදව් අවශ්‍යද?",
    deleteTitle: "ගමනාන්තය මකන්න",
    deleteMessage: `"{{name}}" මැකීමට ඔබට අවශ්‍යද?`,
    cancel: "අවලංගු",
    delete: "මකන්න",
    clear: "මකන්න",
    noDestinations: "ගමනාන්තයන් නොමැත",
    noDestinationsDesc: "ඉහළින් සොයා ඔබගේ ගමනට ගමනාන්ත එකතු කරන්න.",
    yourTripDestinations: "ඔබගේ ගමනාන්ත ({{count}})",
    pickOnMapModalTitle: "Google Maps මත තෝරන්න",
    mapTapHint: "මාප්පය මත තට්ටු කර පින් එකක් දමා නමක් දෙන්න.",
    addDestination: "ගමනාන්තය එකතු කරන්න",
    status: "තත්ත්වය",
    location: "පිහිටීම",
    battery: "බැටරි",
    emergencyContacts: "හදිසි සම්බන්ධතා",
    active: "සක්‍රිය",
    noLocation: "පිහිටීම නොමැත",
    monitoringActive: "නිරීක්ෂණය සක්‍රියයි",
    monitoringInactive: "නිරීක්ෂණය අක්‍රියයි",
    emergencyMode: "හදිසි ප්‍රකාරය",
    sos: "SOS",
    emergencyAlert: "හදිසි ඇඟවීම",
    quickActions: "ඉක්මන් ක්‍රියා",
    setup: "සැකසුම",
    tripPlan: "ගමන සැලැස්ම",
    pause: "විරාම",
    start: "ආරම්භ කරන්න",
    currentLocation: "වත්මන් පිහිටීම",
    lastUpdated: "අවසන් යාවත්කාලය",
    settings: "සැකසුම්",
    inactivityThreshold: "කාර්ය නොකිරීමේ සීමාව",
    batteryAlert: "බැටරි ඇඟවීම",
    updateInterval: "යාවත්කාල පරතරය",
    autoSOS: "ස්වයංක්‍රීය SOS",
    preferMMS: "MMS ප්‍රමුඛ",
    enabled: "සක්‍රිය",
    disabled: "අක්‍රිය",
    yes: "ඔව්",
    no: "නැත",
    unknown: "නොදනී",
    charging: "ආරෝපණය වෙමින්",
    full: "පූර්ණයි",
    lowPower: "බැටරි අඩුයි",
    sosSent: "SOS යවා ඇත",
    sosIssue: "SOS ගැටලුවක්",
    sosSentMessage: "ඔබගේ සම්බන්ධතා වෙත SOS යවා ඇත.",
    sosFailedMessage: "SOS යැවීම අසාර්ථකයි. සැකසුම් පරීක්ෂා කරන්න.",
    sosMissingContact: "SOS යැවීමට පෙර සක්‍රිය හදිසි සම්බන්ධයක් එක් කරන්න.",
    sosMissingLocation: "පිහිටීම නොමැත. කරුණාකර සක්‍රීය කර නැවත උත්සාහ කරන්න.",
    sosRetry: "SOS යැවීම අසාර්ථකයි. නැවත උත්සාහ කරන්න.",
    sendSOSQuestion: "SOS යවන්නද?",
    sosModalBody:
      "ඔබගේ අවසන් පිහිටීම සහ පැතිකඩ විස්තර සමඟ හදිසි සම්බන්ධයන්ට SOS යවනු ඇත.",
    sosTip: "SOS යැවීමට පෙර සක්‍රීය සම්බන්ධයක් එක් කර පිහිටීම සක්‍රීය බව සහතික කරන්න.",
    sendSOS: "SOS යවන්න",
    sending: "යවමින්...",
    activityLogs: "ක්‍රියාකාරී ලොග්",
    rows: "{{count}} පේළි",
    filters: "පෙරහන්",
    tools: "මෙවලම්",
    exportAll: "සම්පූර්ණය නිර්යාත",
    exportShown: "පෙන්වා ඇති දත්ත නිර්යාත",
    clearAll: "සියල්ල මකන්න",
    clearShown: "පෙන්වා ඇති දත්ත මකන්න",
    filterByDateTime: "දිනය සහ වේලාව අනුව පෙරහන්",
    from: "ආරම්භ",
    to: "අවසන්",
    anyDate: "ඕනෑම දිනයක්",
    anyTime: "ඕනෑම වේලාවක්",
    reset: "යළි සකසන්න",
    nothingToExport: "නිර්යාත කිරීමට දෙයක් නැත",
    noLogsMatch: "පෙරහන් වලට ගැළපෙන ලොග් නොමැත.",
    noLogsYet: "ලොග් නොමැත",
    logsHint: "SafeGuard භාවිතා කිරීම ඇරඹූ විට ලොග් මෙහි දිස්වේ.",
    clearAllTitle: "සියලු ලොග් මකන්න",
    clearAllMessage: "සියලු ලොග් ඉවත් කිරීමට ඔබට අවශ්‍යද?",
    clearShownTitle: "පෙන්වා ඇති ලොග් මකන්න",
    clearShownMessage: "{{count}} පෙරහන් ලොග් ඉවත් කරනවාද?",
    nothingToClear: "මකීමට දෙයක් නැත",
    featureNotAvailable: "මෙම පහසුකම නොමැත",
    addClearLogsByIds: "පෙරහන් ලොග් මකීමට store තුළ clearLogsByIds(ids) එකතු කරන්න.",
    savedToPath: "පොලිමේ සුරකින ලදී: {{path}}",
    searchCountryCode: "රට හෝ කේතය සොයන්න",
    selectCountryCode: "රාජ්‍ය කේතය තෝරන්න",
    yourProfile: "ඔබගේ පැතිකඩ",
    save: "සුරකින්න",
    fullName: "සම්පූර්ණ නම",
    username: "පරිශීලක නාමය",
    phoneNumber: "දූරකථන අංකය",
    emailOptional: "ඊමේල් (විකල්ප)",
    medicalNotes: "සෞඛ්‍ය / වෙනත් සටහන්",
    medicalHelper: "මෙම විස්තර SOS පණිවුඩවල අන්තර්ගත වේ.",
    storedAs: "සුරැකින්නේ:",
    enterFullName: "ඔබගේ සම්පූර්ණ නම ඇතුළත් කරන්න",
    handlePlaceholder: "@handle",
    yourPhone: "ඔබගේ දූරකථන අංකය",
    emailPlaceholder: "you@example.com",
    medicalPlaceholder: "ඇලර්ජි, ඖෂධ, අනෙකුත් වැදගත් තොරතුරු",
    profileSaved: "පැතිකඩ සුරැකිණි.",
    fixFields: "පෙන්වා ඇති ක්ෂේත්‍ර නිවැරදි කරන්න.",
  },
};

interface I18nState {
  lang: Lang;
  setLang: (lang: Lang) => void;
  t: (key: string, vars?: Record<string, string | number>) => string;
}

export const useI18n = create<I18nState>((set, get) => ({
  lang: "en",
  setLang: (lang) => set({ lang }),
  t: (key, vars) => {
    const { lang } = get();
    const str = translations[lang]?.[key] ?? translations.en[key] ?? key;
    if (!vars) return str;
    return str.replace(/\{\{(\w+)\}\}/g, (_, k) => `${vars[k] ?? ""}`);
  },
}));

export type { Lang };
